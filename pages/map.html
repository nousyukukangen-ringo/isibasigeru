<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<div class="page-wrapper">

  <header class="header">
    <h2>MAP</h2>
  </header>

  <div id="map"></div>

  <div class="camera-section">
    <div class="camera-container">
      <video id="camera-video" class="camera-video" autoplay playsinline></video>
      <canvas id="camera-canvas" class="hidden"></canvas>
      
      <div id="graffiti-tools" class="graffiti-tools hidden">
        <div class="palette">
          <div class="swatch active" style="background:#ff0000" data-color="#ff0000"></div>
          <div class="swatch" style="background:#00ff00" data-color="#00ff00"></div>
          <div class="swatch" style="background:#ffff00" data-color="#ffff00"></div>
          <div class="swatch" style="background:#ffffff" data-color="#ffffff"></div>
          <div class="swatch" style="background:#000000" data-color="#000000"></div>
        </div>
        <button id="camera-clear" class="clear-btn">ã‚„ã‚Šç›´ã—</button>
      </div>
    </div>

    <div style="margin-top: 8px;">
      <button id="camera-start" class="camera-btn blue-btn">ğŸ“· ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹•</button>
      <button id="camera-shoot" class="camera-btn green-btn hidden">ğŸ“¸ æ’®å½±</button>
      <button id="camera-save-edit" class="camera-btn green-btn hidden">âœ¨ è½æ›¸ãã‚’ä¿å­˜</button>
      <button id="camera-close" class="camera-btn red-btn hidden">âŒ é–‰ã˜ã‚‹</button>
    </div>
  </div>

  <div id="title-section" class="hidden" style="text-align:center; margin-bottom:10px;">
    <input type="text" id="photo-title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›" style="padding:6px 8px; width:70%; border-radius:6px; border:1px solid #ccc;">
  </div>

  <div id="ar-preview" class="ar-preview hidden">
    <h3 class="ar-title">æ’®å½±ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
    <div id="ar-image" class="ar-image"></div>
    <div style="display:flex; gap:8px; justify-content:flex-end;">
      <button id="ar-close" class="close-btn">é–‰ã˜ã‚‹</button>
      <button id="ar-delete" class="delete-btn">å‰Šé™¤</button>
    </div>
  </div>

  <div class="menu-section">
    <button id="goto-sns" class="menu-btn">SNS</button>
    <button id="goto-folder" class="menu-btn">ãƒ•ã‚©ãƒ«ãƒ€</button>
  </div>

  <footer class="footer">
    <button id="logout-button" class="logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
  </footer>
</div>

<style>
html, body { height: 100%; margin: 0; padding:0; font-family: sans-serif; }
.page-wrapper { height: 100vh; display:flex; flex-direction:column; box-sizing:border-box; background: #fafafa; }
.header { background:#FFC107; padding:12px; text-align:center; font-size:22px; font-weight:bold; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

#map { width:100%; height:45vh; max-height:420px; margin:10px 0; border-radius:10px; }

.camera-section { text-align:center; margin-bottom:10px; }
/* ãƒ“ãƒ‡ã‚ªã¨ã‚­ãƒ£ãƒ³ãƒã‚¹ã®é‡ãªã‚Šè¨­å®š */
.camera-container { position: relative; width:92%; max-width:420px; margin: 0 auto; line-height: 0; }
.camera-video { width:100%; border-radius:10px; display:none; }
#camera-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 10px; touch-action: none; z-index: 5; }

/* è½æ›¸ããƒ‘ãƒ¬ãƒƒãƒˆ */
.graffiti-tools { position: absolute; bottom: 10px; left: 0; right: 0; z-index: 10; display: flex; flex-direction: column; align-items: center; gap: 8px; }
.palette { display: flex; gap: 8px; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 20px; }
.swatch { width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer; }
.swatch.active { transform: scale(1.2); border-color: #FFC107; }
.clear-btn { background: #eee; border: none; padding: 4px 12px; border-radius: 4px; font-size: 12px; cursor: pointer; }

.camera-btn { padding:10px 22px; border:none; border-radius:8px; color:#fff; font-size:18px; margin-top:8px; cursor:pointer; font-weight: bold; }
.blue-btn { background:#2E6FBA; }
.green-btn { background:#2ebd70; }
.red-btn { background:#f44336; }
.hidden { display:none !important; }

.ar-preview { width:92%; margin:0 auto 12px auto; padding:12px; background:#fff; border-radius:10px; border:1px solid #ddd; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
.ar-image { width:100%; height:180px; background-size:cover; background-position:center; border-radius:8px; margin-bottom:8px; transition: background-position 0.1s ease-out; }
.close-btn { background:#ff5a5a; color:#fff; border:none; padding:8px 18px; border-radius:6px; cursor:pointer; }
.delete-btn { background:#000; color:#fff; border:none; padding:8px 18px; border-radius:6px; cursor:pointer; }

.menu-section { display:flex; justify-content:space-around; margin:15px 0; }
.menu-btn { width:40%; padding:15px; border:none; border-radius:10px; background:#2E6FBA; color:white; font-size:18px; font-weight: bold; }

.footer { padding:15px; text-align:center; }
.logout-btn { width:90%; padding:14px; background:#ff5a5a; color:white; border:none; border-radius:10px; font-size:18px; }
</style>